{% extends 'base.pages.html.twig' %}
{% block page %}{% endblock page %}
{% block content %} 
<!-- Utils Start -->
    <div class="top" id="top"></div>
    <div id="scroll-to-top"><a href="#top"><i class="fa-2x fa-solid fa-angle-up"></i></a></div>
    <!-- Utils End -->

    <!-- SECOND SECTION START -->
    <div class = "mb-5">
        <section class="second">
            <div class="container">
                <h2> Bienvenue dans  votre Portefeuille AMEMBA </h2>
                <div class="row mt-5">
                    <div class="col-4">
                        <div class="accordion" id="accordionPanelsStayOpenExample">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    Details du compte
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="">
                                            <div class="card card-body mb-4">
                                                <article class="icontext d-flex">
                                                    <span class="icon-recharge"><i class="fa-solid fa-scale-balanced"></i></span>
                                                    <div class="text">
                                                        <h6 class="mb-1">Solde</h6> <span>{{solde}} XOF</span>
                                                    </div>
                                                </article>
                                            </div>
                                        </div>
                                        <div class="recharge-form my-3">
                                            <h4>Recharger mon compte</h4>
                                            <form action="{{path('app_wallet_recharge')}}" method="POST">
                                                <div class="row mb-3">
                                                    <div class = "card ">
                                                        <div class="my-3">
                                                            <input type="number" class="form-control"  placeholder="Montant" name="montant">
                                                            <button type="submit" class="btn btn-outline-success mt-2">Recharger</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                          </div>
                        
                    </div>
    
                    <div class="col-8">
                        <div class="accordion" id="accordionPanelsStayOpenExample">
                            <div class="accordion-item">
                              <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-controls="collapseTwo">
                                  Liste des transactions
                                </button>
                              </h2>
                              <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                          <tr>
                                            <th scope="col">Date</th>
                                            <th scope="col">Montant</th>
                                           
                                            <th scope="col">Type de transaction</th>
                                             <th scope="col">Etat</th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                          {% for trans in transactions %}
                                          <tr>
                                            <th> {{trans.date |format_datetime(locale='fr', dateFormat = 'medium' ,  timeFormat = 'none') }} </th>
                                            <td scope="row">{{trans.montant}}</td>
                                            {% if trans.type == "Achat" %}
                                            <td>
                                                <div class="row">
                                                    <div class = "col-6">  {{trans.type}} </div>
                                                    <div class = "col-6">  <a href="{{path('app_client_commande_details',{id:trans.commande.id})}}" class="btn btn-light">Detail</a> </div>
                                                </div>
                                            </td>
                                            {% else %}
                                            <td> {{trans.type}}</td>
                                            {% endif %}
                                            {% if trans.type == "Dep√¥t" %}
                                            <td scope="row">{{trans.etat}}</td>
                                            {% endif %}
                                            
                                          </tr>
                                        {% endfor %}
                                        </tbody>
                                      </table>
                                </div>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!-- SECOND SECTION END -->
{% endblock content %}


{% block part %}{% endblock part %}